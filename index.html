<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Miro Briefing Wizard — English</title>
  <script src="https://miro.com/app/static/sdk/v2/miro.js"></script>
  <style>
    body { font-family: Inter, system-ui, Arial; margin: 0; padding: 20px; background:#f6f7f9; color:#111; }
    h1 { font-size:18px; margin-bottom:8px; }
    label { display:block; margin-top:12px; font-weight:600; font-size:13px; }
    textarea, input, select { width:100%; box-sizing:border-box; padding:8px; margin-top:6px; border:1px solid #ddd; border-radius:6px; font-size:13px; background:white; }
    textarea { min-height:80px; resize:vertical; }
    .row { display:flex; gap:12px; }
    .col { flex:1; }
    button { margin-top:14px; padding:10px 14px; border:0; background:#1f8ceb; color:white; border-radius:8px; cursor:pointer; font-weight:700; }
    .small { font-size:12px; color:#666; margin-top:6px; }
    .notice { background:#fff; padding:10px; border-radius:8px; border:1px solid #eee; margin-bottom:12px; }
    footer { margin-top:18px; font-size:12px; color:#666; }
  </style>
</head>
<body>
  <h1>Briefing Wizard — Project Intake Form</h1>
  <div class="notice">
    Fill out this form. When you click <strong>Generate Template</strong>, the system will create a visual board layout with all sections automatically.
  </div>

  <label>Project Name</label>
  <input id="projectName" placeholder="e.g., Fall 2026 Campaign" />

  <div class="row">
    <div class="col">
      <label>Project Overview / Description</label>
      <textarea id="overview" placeholder="Describe the idea, goals, purpose, and context. Why is this project important?"></textarea>
    </div>
    <div class="col">
      <label>Target Audience</label>
      <textarea id="audience" placeholder="Who is the main audience? (age, occupation, interests, etc.)"></textarea>
    </div>
  </div>

  <label>Goals / Objectives (separated by commas)</label>
  <input id="goals" placeholder="e.g., awareness, engagement, conversions" />

  <label>Final Copy / Messaging (REQUIRED)</label>
  <textarea id="copy" placeholder="Enter the main message or copy."></textarea>
  <div class="small">If left blank, the system will flag it as missing (can later auto-generate via AI).</div>

  <div class="row">
    <div class="col">
      <label>Deliverables</label>
      <input id="deliverables" placeholder="e.g., 3 hero images (1920x1080), 5 social posts (1080x1080)" />
    </div>
    <div class="col">
      <label>Timeline (Draft, Review, Final)</label>
      <input id="dates" placeholder="e.g., Draft Nov 5, Review Nov 10, Final Nov 15" />
    </div>
  </div>

  <label>References (URLs separated by commas)</label>
  <input id="references" placeholder="e.g., https://dribbble.com/..., https://behance.net/..." />

  <label>Style / Design Notes</label>
  <input id="styleNotes" placeholder="e.g., colors: #111 & #F5A623, typography: Inter, style: clean/minimal" />

  <label>Resource Links / Assets (URLs or descriptions)</label>
  <input id="resources" placeholder="e.g., Google Drive folder with logos or assets" />

  <button id="generateBtn">Generate Template</button>

  <footer>Prototype plugin for Miro — auto-generates a creative brief layout.</footer>

  <script>
    function escapeHtml(unsafe) {
      return unsafe
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/"/g, "&quot;")
        .replace(/'/g, "&#039;");
    }

    miro.onReady(async () => {
      document.getElementById('generateBtn').addEventListener('click', async () => {
        const projectName = document.getElementById('projectName').value.trim() || 'Untitled Project';
        const overview = document.getElementById('overview').value.trim();
        const audience = document.getElementById('audience').value.trim();
        const goals = document.getElementById('goals').value.trim();
        const copy = document.getElementById('copy').value.trim();
        const deliverables = document.getElementById('deliverables').value.trim();
        const dates = document.getElementById('dates').value.trim();
        const references = document.getElementById('references').value.trim();
        const styleNotes = document.getElementById('styleNotes').value.trim();
        const resources = document.getElementById('resources').value.trim();

        const missing = [];
        if (!copy) missing.push('Final Copy');

        if (missing.length) {
          const proceed = confirm('Missing info: ' + missing.join(', ') + '. Continue anyway?');
          if (!proceed) return;
        }

        const viewport = await miro.board.viewport.get();
        const frameX = viewport.x;
        const frameY = viewport.y;
        const frameWidth = 1200;
        const frameHeight = 700;

        const frame = await miro.board.widgets.create({
          type: 'frame',
          title: projectName,
          x: frameX,
          y: frameY,
          width: frameWidth,
          height: frameHeight,
          style: { backgroundColor: '#ffffff' }
        });

        const left = -520;
        const center = 0;
        const right = 520;
        const top = -220;
        const mid = -20;
        const bottom = 230;

        const widgets = [
          { type: 'sticky_note', text: `Project Overview / Description\n\n${overview || '(not provided)'}`, x: frameX + left + 240, y: frameY + top + 120, width: 420, style: { stickyNoteBackgroundColor: 'light_yellow' } },
          { type: 'sticky_note', text: `Target Audience\n\n${audience || '(not provided)'}`, x: frameX + left + 240, y: frameY + mid + 40, width: 420, style: { stickyNoteBackgroundColor: 'light_blue' } },
          { type: 'sticky_note', text: `Goals / Objectives\n\n${goals || '(not provided)'}`, x: frameX + left + 240, y: frameY + bottom - 40, width: 420, style: { stickyNoteBackgroundColor: 'light_green' } },
          { type: 'sticky_note', text: `Final Copy / Messaging\n\n${copy || '--- MISSING FINAL COPY ---'}`, x: frameX + center, y: frameY + top + 100, width: 420, style: { stickyNoteBackgroundColor: copy ? 'light_pink' : 'red_orange' } },
          { type: 'text', text: `<b>Deliverables:</b>\n${escapeHtml(deliverables || '- not specified -')}\n\n<b>Timeline:</b>\n${escapeHtml(dates || '- not specified -')}`, x: frameX + center, y: frameY + mid + 80, width: 420 },
          { type: 'sticky_note', text: `Resource Links / Assets\n\n${resources || '(none)'}`, x: frameX + center, y: frameY + bottom - 30, width: 420, style: { stickyNoteBackgroundColor: 'light_gray' } },
          { type: 'sticky_note', text: `Inspirations / References\n\n${references || '(none)'}`, x: frameX + right - 80, y: frameY + top + 120, width: 420, style: { stickyNoteBackgroundColor: 'light_blue' } },
          { type: 'sticky_note', text: `Style / Design Notes\n\n${styleNotes || '(none)'}`, x: frameX + right - 80, y: frameY + mid + 60, width: 420, style: { stickyNoteBackgroundColor: 'light_yellow' } },
        ];

        await miro.board.widgets.create(widgets);
        alert('✅ Template successfully created on the board!');
      });
    });
  </script>
</body>
</html>
